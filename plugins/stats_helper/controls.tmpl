<script>
//var prim_key="${list(keyvals.keys())[0]}"
//var sec_key="${list(keyvals.keys())[1]}"
var prim_key="device"
var sec_key="framework"
var keyvals=${keyvals}
var filters = {
  //"kernel": "conv2"
}
var filters_prim = {}
% for key in keyvals:
filters_prim["${key}"] =  new Set();
% endfor
function check_checkboxes()
{
% for key in keyvals:
  % for val in keyvals[key]:
if (document.getElementById("check_${key}_${val}").checked) {
   filters_prim["${key}"].add("${val}"); } 
else {
  filters_prim["${key}"].delete("${val}"); }
  % endfor
% endfor
}
$( document ).ready(function() {
    check_checkboxes();
    //document.getElementById("div_debug").innerHTML ="checkboxes checked";
    plot_chart();
});
var colors = ["TEAL", "OLIVE", "ORANGE", "RED"]
//todo generate colors from brewer2mpl
</script>


<%def name="make_radio_button(key, val)">
<div class="custom-control custom-radio custom-control-inline">
  <input type="radio" class="custom-control-input" id="radio_${key}_${val}" name="radio_for_${key}" onclick="set_filter('${key}','${val}')">
  <label class="custom-control-label" for="radio_${key}_${val}">${val}</label>
</div>
</%def>

<%def name="make_checkbox(key, val)">
<div class="custom-control custom-checkbox custom-control-inline">
  <input type="checkbox" checked class="custom-control-input" id="check_${key}_${val}" onclick="set_key_filter('${key}','${val}','check_${key}_${val}')">
  <label class="custom-control-label " for="check_${key}_${val}">${val}</label>
</div>


</%def>

<%def name="make_radio_line(key, vals)">
    <tr>
      <td>
        <div class="custom-control custom-radio custom-control-inline">
          <input class="custom-control-input" id="radio_key1_${key}" name="radio_for_key1" type="radio" onclick="set_prim_key('${key}')">
          <label class="custom-control-label" for="radio_key1_${key}"></label>
        </div>
    </td>
      <td>
        <div class="custom-control custom-radio custom-control-inline">
          <input class="custom-control-input" id="radio_key2_${key}" name="radio_for_key2" type="radio" onclick="set_sec_key('${key}')">
          <label class="custom-control-label" for="radio_key2_${key}"></label>
        </div>

      </td>
      <th class="align-middle" scope="row">${key}</th>
      <td>
      <div id="div_radio_${key}" class="btn-group" role="group" aria-label="..." style="padding: 2px;">
        % for val in vals:
          ${make_radio_button(key, val)}
        % endfor
      </div>
      <div id="div_check_${key}" class="btn-group" role="group" aria-label="..." style="padding: 2px;">
        % for val in vals:
          ${make_checkbox(key, val)}
        % endfor
      </div>
    </td>
    </tr>
</%def>


<table class="table  table-bordered">
  <thead>
    <tr>
      <th class="col-1">key1</th>
      <th class="col-1">key2</th>
      <th class="col-1"></th>
      <th class="col-9">values</th>
    </tr>
  </thead>
  <tbody>
% for key in keyvals:
  ${make_radio_line(key, keyvals[key])}
% endfor
  </tbody>
</table>
