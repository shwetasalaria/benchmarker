<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Stats | Performance data</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="http://blackbird.pw/">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><!--script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script--><script language="javascript" type="text/javascript" src="assets/js/Chart.min.js"></script><script language="javascript" type="text/javascript" src="assets/js/jquery.min.js"></script><script language="javascript" type="text/javascript" src="assets/js/data-forge/data-forge.js"></script>
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md navbar-dark bg-dark static-top mb-4"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="http://blackbird.pw/">

            <span id="blog-title">Performance data</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto"><li class="nav-item">
<a href="https://github.com/undertherain/benchmarker/" class="nav-link">source code</a>

                
            </li></ul>
<ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!--Body content--><section class="container"><h1>Performance measurement results</h1>
<h3>[still debugging, expect more data to come soon]</h3>

<script>
//var prim_key="kernel"
//var sec_key="device"
var prim_key="device"
var sec_key="framework"
var keyvals={'kernel': ['vgg16'], 'device': ['Tesla K40c', 'GeForce GTX 980 Ti', 'Tesla P100-SXM2-16GB', 'GeForce GTX 1080 Ti'], 'framework': ['chainer', 'tensorflow']}
var filters = {
  //"kernel": "conv2"
}

var colors = ["TEAL", "OLIVE", "ORANGE", "RED"]
//todo generate colors from brewer2mpl
</script><div class="btn-group">
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">prim. key:</button>
    <div class="dropdown-menu" x-placement="bottom-start" style="position: absolute; transform: translate3d(0px, 56px, 0px); top: 0px; left: 0px; will-change: transform;">
      
      <a class="dropdown-item" onclick="set_prim_key('kernel')">kernel</a>

      
      <a class="dropdown-item" onclick="set_prim_key('device')">device</a>

      
      <a class="dropdown-item" onclick="set_prim_key('framework')">framework</a>

    </div>
  </div>
  <div class="btn-group" id="div_prim_key">primary key</div>



<div class="btn-group">
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">sec. key:</button>
    <div class="dropdown-menu" x-placement="bottom-start" style="position: absolute; transform: translate3d(0px, 56px, 0px); top: 0px; left: 0px; will-change: transform;">
      
      <a class="dropdown-item" onclick="set_sec_key('kernel')">kernel</a>

      
      <a class="dropdown-item" onclick="set_sec_key('device')">device</a>

      
      <a class="dropdown-item" onclick="set_sec_key('framework')">framework</a>

    </div>
  </div>
  <div class="btn-group" id="div_sec_key">sec key</div>



<br><div id="div_radio_kernel" class="btn-group" role="group" aria-label="..." style="padding: 5px;">
kernel: 

  
<div class="custom-control custom-radio custom-control-inline">
  <input type="radio" class="custom-control-input" id="radio_kernel_vgg16" name="radio_for_kernel" onclick="set_filter('kernel','vgg16')"><label class="custom-control-label" for="radio_kernel_vgg16">vgg16</label>
</div>

</div>


  
<div id="div_radio_device" class="btn-group" role="group" aria-label="..." style="padding: 5px;">
device: 

  
<div class="custom-control custom-radio custom-control-inline">
  <input type="radio" class="custom-control-input" id="radio_device_Tesla K40c" name="radio_for_device" onclick="set_filter('device','Tesla K40c')"><label class="custom-control-label" for="radio_device_Tesla K40c">Tesla K40c</label>
</div>

  
<div class="custom-control custom-radio custom-control-inline">
  <input type="radio" class="custom-control-input" id="radio_device_GeForce GTX 980 Ti" name="radio_for_device" onclick="set_filter('device','GeForce GTX 980 Ti')"><label class="custom-control-label" for="radio_device_GeForce GTX 980 Ti">GeForce GTX 980 Ti</label>
</div>

  
<div class="custom-control custom-radio custom-control-inline">
  <input type="radio" class="custom-control-input" id="radio_device_Tesla P100-SXM2-16GB" name="radio_for_device" onclick="set_filter('device','Tesla P100-SXM2-16GB')"><label class="custom-control-label" for="radio_device_Tesla P100-SXM2-16GB">Tesla P100-SXM2-16GB</label>
</div>

  
<div class="custom-control custom-radio custom-control-inline">
  <input type="radio" class="custom-control-input" id="radio_device_GeForce GTX 1080 Ti" name="radio_for_device" onclick="set_filter('device','GeForce GTX 1080 Ti')"><label class="custom-control-label" for="radio_device_GeForce GTX 1080 Ti">GeForce GTX 1080 Ti</label>
</div>

</div>


  
<div id="div_radio_framework" class="btn-group" role="group" aria-label="..." style="padding: 5px;">
framework: 

  
<div class="custom-control custom-radio custom-control-inline">
  <input type="radio" class="custom-control-input" id="radio_framework_chainer" name="radio_for_framework" onclick="set_filter('framework','chainer')"><label class="custom-control-label" for="radio_framework_chainer">chainer</label>
</div>

  
<div class="custom-control custom-radio custom-control-inline">
  <input type="radio" class="custom-control-input" id="radio_framework_tensorflow" name="radio_for_framework" onclick="set_filter('framework','tensorflow')"><label class="custom-control-label" for="radio_framework_tensorflow">tensorflow</label>
</div>

</div>






<script type="text/javascript">
var df = new dataForge.DataFrame({
    columnNames: ["kernel", "device", "framework", "perf"],
    rows: [['vgg16', 'Tesla K40c', 'chainer', 64.92611408047378], ['vgg16', 'GeForce GTX 980 Ti', 'chainer', 19.79562048902735], ['vgg16', 'Tesla P100-SXM2-16GB', 'tensorflow', 9.196029103671512], ['vgg16', 'Tesla K40c', 'tensorflow', 30.62504617248972], ['vgg16', 'Tesla P100-SXM2-16GB', 'chainer', 12.036421794630588], ['vgg16', 'GeForce GTX 1080 Ti', 'tensorflow', 10.405107443531355], ['vgg16', 'GeForce GTX 1080 Ti', 'chainer', 12.18715507676825]]
  });
</script><br><div id="filters"></div>

      <script type="text/javascript">
        function set_filter(key, val) {
          if ( (key != prim_key) && (key != sec_key))
          filters[key] = val;
          plot_chart(); };
        function set_prim_key(key) {
          if (sec_key == key)
            sec_key = prim_key;
          prim_key = key;
          if (filters.hasOwnProperty(key))  {           
              delete filters[key] }
          plot_chart();  };
        function set_sec_key(key) {
          if (prim_key == key)
            prim_key = sec_key; 
          sec_key = key;
          if (filters.hasOwnProperty(key))  {           
              delete filters[key] }
          plot_chart();  };
        function display_filters() {
          document.getElementById("div_prim_key").innerHTML = prim_key;
          document.getElementById("div_sec_key").innerHTML = sec_key;
          $("#div_radio_" + prim_key).hide('fast')
          $("#div_radio_" + sec_key).hide('fast')
          for (key in keyvals) {
              //str_filters += key +": "+filters[key];
              if ((key != prim_key) && (key != sec_key))
              {
                $("#div_radio_" + key).show('fast')
                if (! filters.hasOwnProperty(key))
                  filters[key] = keyvals[key][0]
              }
          }  
          for (key in filters) {
            document.getElementById("radio_" + key + "_" + filters[key]).checked=true;
          }
        }
      </script><canvas id="myChart" width="800" height="450"></canvas><script>
function apply_filters(df, filters)
{
  res = df
  for (var key in filters) 
  {
    if (filters.hasOwnProperty(key)) 
      res = res.where(row => row[key] == filters[key]);
  }
  return res
}

function get_value(df, key, val)
{
  var filtered = df.where(row => row[key] == val)
  var cols = filtered.getColumns().where(column => column.name == "perf").first().series
  return cols.average()
}

function get_rec_per_sec_key(df, sec_key, sec_val, prim_key, prim_values, id_color)
{
  var result = {}
  result["label"] = sec_val
  result["backgroundColor"] = colors[id_color]
  var filtered_df = df.where(row => row[sec_key] == sec_val);
  result["data"] = prim_values.map(k => get_value(filtered_df, prim_key, k))
  return result
}

function get_chart_data()
{
  var prim_values = df.getColumns().where(column => column.name == prim_key).first().series.distinct().toArray();
  var sec_values = df.getColumns().where(column => column.name == sec_key).first().series.distinct().toArray();
  df_filtered = apply_filters(df, filters)
  var chart_data = {
    labels: prim_values,
    datasets: sec_values.map((k,i) => get_rec_per_sec_key(df_filtered, sec_key, k, prim_key, prim_values, i))
  };
  return chart_data
}
</script><script>
function plot_chart()
{
display_filters();
var ctx = document.getElementById("myChart").getContext("2d");
var color = Chart.helpers.color;

var myBarChart = new Chart(ctx, {
    type: 'bar',
    data: get_chart_data(),
    options: {
        barValueSpacing: 20,
        scales: {
            yAxes: 
            [
            {
                ticks: 
                {
                    min: 0,
                },
                scaleLabel: 
                {
                    display: true,
                    labelString: 'Epoch time'
                }            
            }
            ]
        }
    }
});

}
plot_chart();
</script></section><!--div class="e-content entry-content" itemprop="articleBody text">
    </div--><!--End of body content--><div class="container" id="content" role="main">
    <div class="body-content">

        <footer id="footer">
            Maintained by  <a href="mailto:alex@blackbird.pw">Aleksandr Drozd</a>         
            
        </footer>
</div>
</div>


        <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>
</body>
</html>
